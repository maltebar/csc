<div class='page-header'>
  <h1>Assignments</h1>
</div>

<%if current_user.admin?%>
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#newAssignmentForm">
  Create new assignment
</button>
<%end%>

<table class='table'>
  <thead>
    <tr>
      <th>Assignment Title</th>
      <th>Description</th>
      <th>Draft Due Date</th>
      <th>Final Due Date</th>
      <% if current_user.admin? %>
        <th>View Student Submissions</th>
        <th>Edit</th>
      <% else %>
        <th>Go to Assignment</th>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <% @assignments.each do |assignment| %>
      <tr>
        <td>
          <%= assignment.title %>
        </td>
        <td>
          <%= assignment.description.html_safe %>
        </td>
        <td>
          <%= assignment.draft_due.strftime("%A, %B %d at %I:%M %p") %>
        </td>
        <td>
          <%= assignment.final_due.strftime("%A, %B %d at %I:%M %p") %>
        </td>
        <td>
          
        </td>
        <% if current_user.admin? %>
          <td>
             <%= link_to 'Edit', edit_assignment_path(assignment) %><br>
             <%= link_to 'Delete', assignment, method: :delete %>
          </td>
        <%else%>
          <td>
            Link to write a post here.
          </td>
        <% end %>
      </tr>
      <% end %>
    </tbody>
</table>




<!-- Modal -->
<div class="modal fade" id="newAssignmentForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h2 class="modal-title" id="myModalLabel">New assignment</h2>
      </div>
      <div class="modal-body">
        <% @assignment=Assignment.new %>

      <%= form_for(@assignment, :html=>{:class=>"form-horizontal"}) do |f| %>

          <div class="form-group">
            <%= f.label :title, class:'control-label col-md-2' %>
            <div class='col-md-10'>
              <%= f.text_field :title, class:'form-control' %>
            </div>
          </div>

          <div class="form-group">
            <%= f.label :description, class:'control-label col-md-2' %>
            <div class='col-md-10'>
              <%= f.text_area :description, class:'form-control' %>
            </div>
          </div>

          <div class="form-group">
            <%= f.label :draft_due, class:'control-label col-md-2' %>
            <div class='col-md-10'>
              <%= f.datetime_select :draft_due%>
            </div>
          </div>

          <div class="form-group">
            <%= f.label :final_due, class:'control-label col-md-2' %>
            <div class='col-md-10'>
              <%= f.datetime_select :final_due%>
            </div>
          </div>
    
</div>

      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <%= f.submit "Save", class: 'btn btn-primary' %>
      </div>
      <% end %>
    </div>
  </div>
</div>
</div>
